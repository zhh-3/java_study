!function(R){"use strict";var P="ht",z=R[P],a=function(){return document},f=function(){return a().body},S=function(V,s,d){V.style.setProperty(s,d,null)},Y=function(Y){return a().createElement(Y)},s=function(){return Y("div")},O=function(){var H=Y("canvas");return H},h=function(P,m){S(P,"-webkit-transform",m),S(P,"-ms-transform",m),S(P,"transform",m)},M=function(K,O){S(K,"-webkit-transform-origin",O),S(K,"-ms-transform-origin",O),S(K,"transform-origin",O)},E=function(c,R){c.appendChild(R)},T=function(I,l){I.removeChild(l)},B=R.parseInt,L=z.Default,r=L.eventListenerOptionsFalse,w=(L.eventListenerOptionsTrue,function(Y,t,T,h){Y.addEventListener(t,T,h?r:r)}),D=L.getInternal(),x=Math.PI,I="white-space",G="visibility",F="left",d="top",k="width",u="height",X="position",N="display",H="z-index",c="px",o="0 0",g="absolute",Z="visible",V="hidden",y="none",q="block",K="nowrap",t="rgba(0, 0, 0, 0.005)";L.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var J=z.graph.GraphView.prototype,C=J._42;J.adjustHtmlNodeIndex=!0,J._42=function(r,F){if(C.call(this,r,F),this.adjustHtmlNodeIndex)for(var q=this.getDataModel()._datas._as,I=q.length,n=1,g=0;I>g;g++){var b=q[g];if(b instanceof i){var f=this.getDataUI(b);S(f.$2f,H,n+""),S(f.$3f,H,n+1+""),n+=2}}};var l=z.HtmlNodeUI=function(p,b){var u=this;l.superClass.constructor.call(u,p,b);var x=u.$2f=s(),Y=u.$3f=O();S(x,X,g),S(x,G,V),S(x,I,K),Y.draggable=!1,S(Y,X,g),S(Y,N,y),M(Y,o),w(x,"change",function(W){var n=W.target,s=n.bind||n.getAttribute("bind"),i=n.type&&"checkbox"===n.type?n.checked:n.value,l=b.getContext();s&&l&&(l[s]=i,u.$4f=JSON.stringify(l))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(i){w(x,i,this.$9f.bind(this))},u)};L.def(l,D.ui().NodeUI,{_visible:!0,$11f:function(){var J=this,_=J.$3f,E=J._data,l=E.getDraggerImageWidth(),Q=E.getDraggerImageHeight(),F=E.getDraggerImage(),T=D.initContext(_);T.beginPath(),D.setCanvas(_,l,Q),D.translateAndScale(T,0,0,1),T.clearRect(0,0,l,Q),L.drawImage(T,L.getImage(F),0,0,l,Q),T.restore()},_80o:function(Q){l.superClass._80o.call(this,Q);var P=this,j=P._data,b=j._padding,T=2*b,z=P.$2f,W=P.$3f,e=P.gv,U=e.getZoom(),o=e.getTranslateX(),m=e.getTranslateY(),L=e.getView(),i=P._83o,K=j._width,$=j._height,C=i.position,R=i.rotation,f=(K-T)/j.$5f*U,J=($-T)/j.$6f*U,A=P._html,O=j._html,_=j.getHtmlType();if("html"===_){var D=j.getContext()||{},I=P.$4f,p=j.$10f,w=JSON.stringify(D);A&&I&&A===O&&I===w||(P.$4f=w,P._html=O,z.innerHTML=p?p(D):O)}else if(null!=_){var M=j.getHtml();"ht"===_&&(M=M.getView()),A&&A===M&&z.contains(A)||(P._html=M,z.innerHTML="",E(z,M))}if(!z.parentNode){var v=e.$1f;if(!v){var n=s();S(n,X,g),S(n,H,"0"),v=e.$1f=n;var r=e._canvas.nextSibling;r?L.insertBefore(n,r):E(L,n)}E(v,z),E(v,W),j.onContentInitialized&&j.onContentInitialized(z)}if(j._scalable){var a=j.$5f,Y=j.$6f;h(z,"rotate("+180*(R/x)+"deg) scale("+f+","+J+")"),S(z,k,""),S(z,u,""),S(z,F,(C.x-a/U/2)*U+o+c),S(z,d,(C.y-Y/U/2)*U+m+c)}else{var _q=B(z.style.width),uo=B(z.style.height),os=B((K-T)*U),jn=B(($-T)*U),Po="100%",Eq=z.children[0];S(Eq,k,Po),S(Eq,u,Po),(_q!==os||uo!==jn)&&(S(z,k,os+c),S(z,u,jn+c),"ht"===_&&O.invalidate()),h(z,"rotate("+180*(R/x)+"deg)"),S(z,F,(C.x-os/U/2)*U+o+c),S(z,d,(C.y-jn/U/2)*U+m+c)}var ns=P.dragRect;e.isMovable(j)&&e.isSelected(j)&&ns?(Q.save(),Q.fillStyle=t,Q.fillRect(ns.x,ns.y,ns.width,ns.height),Q.restore(),S(W,F,ns.x*U+o+c),S(W,d,ns.y*U+m+c),h(W,"scale("+U+","+U+")"),S(W,N,q),P.$11f()):S(W,N,y),S(z,G,this._visible?Z:V)},dispose:function(){var S=this.gv.$1f;this.$2f.parentNode===S&&S.removeChild(this.$2f),this.$3f.parentNode===S&&S.removeChild(this.$3f)},_84o:function(Y){this._visible=Y,S(this.$2f,G,Y?Z:V),S(this.$3f,N,Y?q:y)},_3O:function(){var h=this,P=h.gv,t=h._data;l.superClass._3O.call(h);var v=t.getRect();P.isEditable(t)&&(h.dragRect={x:v.x+v.width+t._padding,y:v.y+10,width:t.getDraggerImageWidth(),height:t.getDraggerImageHeight()},h._68o(h.dragRect))},rectIntersects:function(a){var J=this._79o();return z.Default.intersection(J,a)?!0:void 0},$9f:function(S){var T=this.gv,e=this._data;T.sm().contains(e)&&S.stopPropagation()}});var i=z.HtmlNode=function(){i.superClass.constructor.call(this)};z.Default.def(i,z.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:z.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(c){var V=this,I=V._html;V._html=c,"html"===V.getHtmlType()&&"Handlebars"in R&&(V.$10f=Handlebars.compile(c)),V.$13f(),V.fp("html",I,c)},setContext:function(X){var j=this,g=j._context;j._context=X,j.fp("context",g,X),j.$13f()},setScalable:function(e){var L=this,U=L._scalable;L._scalable=e,L.fp("scalable",U,e),L.$13f()},getHtmlType:function(){var w=this._html;return w?"string"==typeof w?"html":w.getView?"ht":"dom":null},$13f:function(){var D=this,p=D._html,U=D.$10f;if(p){var y=s(),z=!1,F=D.getHtmlType();if(S(y,X,g),S(y,I,K),S(y,G,V),"html"===F?(y.innerHTML=U?U(D.getContext()||{}):p,z=!0):"ht"===F?(E(y,p.getView()),z=!0):"dom"===F&&(E(y,p),z=!0),z){var O=2*D._padding;E(f(),y),D.$5f=y.scrollWidth,D.$6f=y.scrollHeight,D._width=D.$5f+O,D._height=D.$6f+O,D._originWidth=D._width,D._originHeight=D._height,T(f(),y)}}},getUIClass:function(){return z.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);