!function(V,P){"use strict";var X="position",p="absolute",F="relative",_="px",l="left",k="right",M="top",w="bottom",C="display",n="none",D="block",K=ht.Default,z=K.getInternal(),a=Math.floor,Z=Math.ceil,h=Math.PI,y=null,B=V.parseInt,Q=function(J){return J.getContext("2d")},t=function(){return document},Y=function(O){return t().createElement(O)},O=function(){return Y("canvas")},f=function(P,s,i){P.style.setProperty(s,i,y)},I=function(C,f,$){K.def(ht.widget[C],f,$)},E=function(Y,y){Y.appendChild(y)},v=function($,B){$.removeChild(B)},W=K.eventListenerOptionsFalse,r=(K.eventListenerOptionsTrue,function(p,b,o,u){p.addEventListener(b,o,u?W:W)}),e=function(u,E,Z,B){u.removeEventListener(E,Z,B?W:W)};ht.widget.RulerFrame=function(s){var w=this,T=w._view=z.createView(null,w),I=w.$1k=O(),M=w.$2k=O(),_=w.$3k=O(),L=w.$4k=O();w._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},w._topRulerConfig={visible:!0},w._rightRulerConfig={visible:!1},w._bottomRulerConfig={visible:!1},w._leftRulerConfig={visible:!0},E(T,I),E(T,_),E(T,M),E(T,L),f(T,X,F),f(T,"box-sizing","border-box"),f(T,"-moz-box-sizing","border-box"),f(I,X,p),f(M,X,p),f(_,X,p),f(L,X,p),w.$14k=function(){w.$13k=1,w.iv()},w.$15k=function(d){if(w._topRulerConfig.guideVisible||w._rightRulerConfig.guideVisible||w._bottomRulerConfig.guideVisible||w._leftRulerConfig.guideVisible||w._defaultRulerConfig.guideVisible||(w._topRulerConfig.guideTipVisible||w._rightRulerConfig.guideTipVisible||w._bottomRulerConfig.guideTipVisible||w._leftRulerConfig.guideTipVisible||w._defaultRulerConfig.guideTipVisible)&&w._component){var I=T.getBoundingClientRect();w.$16k={x:d.clientX-I.left,y:d.clientY-I.top},w.$5k()}},w.setComponent(s)},I("RulerFrame",P,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(q){var P=this,C=P._component,d=P.getView();if(d){if(P._component=q,P.fp("component",C,q),C){var M=P.getComponentView(C);v(d,M),e(d,"mousemove",P.$15k),P.removeComponentPropertyChangeListener(C,P.$14k)}if(q){var G=P.getComponentView(q);E(d,G),f(G,X,p),r(d,"mousemove",P.$15k),P.addComponentPropertyChangeListener(q,P.$14k)}}},addComponentPropertyChangeListener:function(u,R){u&&u.mp&&u.mp(R)},removeComponentPropertyChangeListener:function(l,j){l&&l.ump&&l.ump(j)},getComponentHZoom:function(H){return H&&H.getZoom?H.getZoom():1},getComponentVZoom:function(N){return N&&N.getZoom?N.getZoom():1},getComponentViewRect:function(w){return w&&w.getViewRect?w.getViewRect():void 0},getComponentView:function(l){return l&&l.getView?l.getView():l},invalidateComponent:function(A){A&&A.iv&&A.iv()},validateComponent:function(z){z&&z.validate&&z.validate()},$7k:function(S,k,W,w,g,$,m,O,M,x,t,I){if(k.visible){var F=this._defaultRulerConfig,Q="borderStyle",i="borderColor",s="borderWidth",r="background",j=k[Q]||F[Q],L=k[i]||F[i],E=k[s]||F[s],B=k.size!=y?k.size:F.size,e=k[r]||F[r],_=B+E,P=this.$6k(E,j,L,S,W,g,_,m,O,M,x,t,I);f(S,g,"0px"),$?z.setCanvas(S,w-P,B):z.setCanvas(S,B,w-P),f(S,"background",e),f(S,C,D)}else f(S,C,n),f(this.getComponentView(this._component),g,"0px")},$6k:function(H,j,Y,E,p,q,$,i,B,u,n,P,V){var b=0;return f(E,p,H+"px "+j+" "+Y),f(this.getComponentView(this._component),q,$+_),i?(f(E,B,u+_),b+=u):f(E,B,"0px"),n?(f(E,P,V+_),b+=V):f(E,P,"0px"),b},validateImpl:function(){var Z=this,H=Z._component,A=Z.$1k,z=Z.$2k,G=Z.$3k,m=Z.$4k,P=Z._view,I=Z._defaultRulerConfig,U=Z._topRulerConfig,x=Z._rightRulerConfig,T=Z._bottomRulerConfig,g=Z._leftRulerConfig,K=I.size;if(P&&H){var c=U.size!=y?U.size:K,r=x.size!=y?x.size:K,s=T.size!=y?T.size:K,e=g.size!=y?g.size:K;Z.$7k(A,U,"border-bottom",P.offsetWidth,M,!0,g.visible,l,e,x.visible,k,r),Z.$7k(z,x,"border-left",P.offsetHeight,k,!1,U.visible,M,c,T.visible,w,s),Z.$7k(G,T,"border-top",P.offsetWidth,w,!0,g.visible,l,e,x.visible,k,r),Z.$7k(m,g,"border-right",P.offsetHeight,l,!1,U.visible,M,c,T.visible,w,s),Z.$13k?delete Z.$13k:Z.invalidateComponent(H),Z.validateComponent(H),Z.$5k()}},$5k:function(){function c(x,K,k,S,c,o){if(K.visible){var j=Q(x),l=K[I]||M,X=K[p]!=y?K[p]:d,m=K[i]||h,u=K[r]||b,C=K.size!=y?K.size:w,ns=K[B]||z,Nj=K[$]||Y,pn=K[q]||v,Ih=K[T]!=y?K[T]:n,Uh=K[H]!=y?K[H]:F,Fj=K[G]!=y?K[G]:J,Lf=K[t]!=y?K[t]:g,Wj=K[f]!=y?K[f]:N,_l=K[e]!=y?K[e]:_,Wh=K[P]||Op,uc=K[W]||nr;X&&(l=s[o]=s.$8k(s[o]||l,K[O]||Z,K[a]||V,S?R:A,Nj)),k.call(s,j,U,L,D,E,C,S?R:A,l,m,u,c,ns,pn);var Kl=s.$16k;(Ih||Uh)&&Kl&&(S?s.$9k(j,Kl.x,C,Wh,uc,Ih,Uh,Fj,Lf,Wj,_l):s.$10k(j,Kl.y,C,Wh,uc,Ih,Uh,Fj,Lf,Wj,_l,c))}}var s=this,C=s.$1k,u=s.$2k,K=s.$3k,S=s.$4k,k=s._topRulerConfig,j=s._rightRulerConfig,l=s._bottomRulerConfig,x=s._leftRulerConfig,m=s._defaultRulerConfig,X=s._component,o=s.getComponentViewRect(X),R=s.getComponentHZoom(X),A=s.getComponentVZoom(X),U=o.x*R,D=U+o.width*R,L=o.y*A,E=L+o.height*A,w=s._defaultRulerConfig.size,I="defaultMajorTickSpacing",O="maxPhysicalMajorTickSpacing",a="minPhysicalMajorTickSpacing",p="tickSpacingAdaptable",i="majorTickTextFont",r="majorTickTextColor",B="majorTickColor",q="minorTickColor",T="guideVisible",H="guideTipVisible",G="guideTipBorderColor",t="guideTipTextColor",f="guideTipTextFont",e="guideTipBackground",P="guideColor",W="guideWidth",$="minMajorTickSpacing",M=m[I],Z=m[O],V=m[a],d=m[p],h=m[i],b=m[r],z=m[B],Y=m[$],v=m[q],n=m[T],F=m[H],J=m[G],g=m[t],N=m[f],_=m[e],Op=m[P],nr=m[W];s._view&&X&&(c(C,k,s.$11k,!0,!1,"_currentTopMajorTickSpacing"),c(u,j,s.$12k,!1,!0,"_currentRightMajorTickSpacing"),c(K,l,s.$11k,!0,!0,"_currentBottomMajorTickSpacing"),c(S,x,s.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(d,V,X,O,n){return X>d*O?d=a(V/O/n)*n:d*O>V&&(d=Z(X/O/n)*n),d},getHTipText:function(i){var G=this,D=G._component,T=0,P=G._view.getBoundingClientRect();return D.lp?T=B(D.lp({x:i.x+P.left,y:i.y}).x):T-=B(this.getComponentView(D).style.left)||0,T},$9k:function(Q,p,I,U,q,O,r,W,N,E,F){var y=this,h=y._component;Q.save(),z.translateAndScale(Q,0,0,1);var M=p-(B(this.getComponentView(h).style.left)||0),j=0;if(p=y.getHTipText(y.$16k),O&&(Q.beginPath(),Q.fillStyle=U,Q.rect(M,j,q,I),Q.fill()),r){Q.beginPath(),Q.textAlign="center",Q.textBaseline="middle",Q.font=E;var v=Q.measureText(p).width+6;Q.fillStyle=F,Q.rect(M-v/2,j,v,I),Q.fill(),Q.strokeStyle=W,Q.stroke(),Q.beginPath(),Q.fillStyle=N,Q.fillText(p,M,j+I/2)}Q.restore()},getVTipText:function(Y){var k=this,t=k._component,x=0,p=k._view.getBoundingClientRect();return t.lp?x=B(t.lp({x:Y.x,y:Y.y+p.top}).y):x-=B(this.getComponentView(t).style.top)||0,x},formatScaleText:function(n){return Math.round(n)},$10k:function(d,D,M,Z,Q,P,W,r,U,S,K,g){var O=this,i=O._component;d.save(),z.translateAndScale(d,0,0,1);var G=M/2,u=D-(B(this.getComponentView(i).style.top)||0);if(D=O.getVTipText(O.$16k),P&&(d.beginPath(),d.fillStyle=Z,d.rect(G-M/2,u,M,Q),d.fill()),W){d.translate(G,u),d.rotate((g?90:-90)*h/180),d.translate(-G,-u),d.beginPath(),d.textAlign="center",d.textBaseline="middle",d.font=S;var l=d.measureText(D).width+6;d.fillStyle=K,d.rect(G-l/2,u-M/2,l,M),d.fill(),d.strokeStyle=r,d.stroke(),d.fillStyle=U,d.fillText(D,G,u)}d.restore()},$11k:function(g,p,W,$,o,H,N,h,F,U,x,V,X){g.save(),W=0;var Z=p,C=$,w=(Z+C)/2;p=0,$=C-Z,z.translateAndScale(g,0,0,1);var l=0,M=0,I=B(H/2),J=H-I,L=x?0:I,_=h*N,D=_/10;p-=_,$+=_,g.clearRect(p,0,$-p,H),g.beginPath(),g.fillStyle=X;var R=a(w/D)*D-Z;for(l=R;$>l;l+=D)g.rect(l,W+L,1,J);for(l=R;l>p;l-=D)g.rect(l,W+L,1,J);for(g.fill(),L=x?0:1,g.beginPath(),g.fillStyle=V,R=a(w/_)*_-Z,l=R;$>l;l+=_)g.rect(l,W+L,1,H-1);for(l=R;l>p;l-=_)g.rect(l,W+L,1,H-1);g.fill();var s=B(/\d+px/.exec(F)[0]),b=(s||10)/2;g.textBaseline="middle",L=x?H-b-2:b+2,g.beginPath(),g.fillStyle=U,g.font=F;var y=a(w/_)*_/N;for(l=R,M=y;$>l;l+=_,M+=h){var S=this.getHScaleText?this.getHScaleText(l):M;g.fillText(this.formatScaleText(S),l+2,W+L)}for(l=R,M=y;l>p;l-=_,M-=h){var S=this.getHScaleText?this.getHScaleText(l):M;g.fillText(this.formatScaleText(S),l+2,W+L)}g.restore()},$12k:function(m,u,s,c,d,H,I,Y,D,g,N,V,r){function P(z,T,D,$,E,O){E=W.getVScaleText?W.getVScaleText(D):E,E=W.formatScaleText(E),m.translate(z+T,D),m.rotate(-$),m.translate(-z-T,-D),m.fillText(E,z+T+(O?2:1),D),m.translate(z+T,D),m.rotate($),m.translate(-z-T,-D)}m.save(),u=0;var Z=s,j=d,T=(Z+j)/2;s=0,d=j-Z,z.translateAndScale(m,0,0,1);var J=0,W=this,y=0,e=B(H/2),w=H-e,L=N?0:e,R=Y*I,o=R/10;s-=R,d+=R,m.clearRect(u,0,H,d-s),m.beginPath(),m.fillStyle=r;var n=a(T/o)*o-Z;for(J=n;d>J;J+=o)m.rect(u+L,J,w,1);for(J=n;J>s;J-=o)m.rect(u+L,J,w,1);for(m.fill(),L=N?0:1,m.beginPath(),m.fillStyle=V,n=a(T/R)*R-Z,J=n;d>J;J+=R)m.rect(u+L,J,H-1,1);for(J=n;J>s;J-=R)m.rect(u+L,J,H-1,1);m.fill();var O=B(/\d+px/.exec(D)[0]),G=(O||10)/2,M=90*h/180;m.textBaseline="middle",L=N?H-G:G+2,M=N?-M:M,m.beginPath(),m.fillStyle=g,m.font=D;var i=a(T/R)*R/I;for(J=n,y=i;d>J;J+=R,y+=Y)P(u,L,J,M,y,N);for(J=n,y=i;J>s;J-=R,y-=Y)P(u,L,J,M,y,N);m.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var j=this,Z=j._component,m=j._view;Z&&j.removeComponentPropertyChangeListener(Z,j.$14k),m&&(e(m,"mousemove",j.$15k),v(m.parentNode,m),j._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);