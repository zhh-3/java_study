!function(J,h){"use strict";var w="ht",Q=J[w],E="innerHTML",y="className",b=null,R="px",W=Q.Default,L=W.getInternal(),F="0",k=function(){return document},c=function(z){return k().createElement(z)},p=function(){return c("canvas")},P=function(o,$,t){o.style.setProperty($,t,b)},A=function(l,v,j){W.def(Q.widget[l],v,j)},m=function(r,S){r.appendChild(S)},S=function(Z,G){Z.removeChild(G)},z=W.eventListenerOptionsFalse,u=(W.eventListenerOptionsTrue,function(G,c,M,D){G.addEventListener(c,M,D?z:z)}),I=function(C,B,S,T){C.removeEventListener(B,S,T?z:z)},N=W.isTouchable;L.addMethod(W,{menuLabelFont:(N?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),Q.widget.Menu=function(n){var C=this,v=C._view=L.createView(null,C),M=C.$1g=new Q.widget.ContextMenu,Z=c("ul");M._r=!0,M._view[y]+=" ht-widget-dropdownmenu",v[y]="ht-widget-menu",Z[y]="header",P(v,"margin",F),P(v,"padding",F),P(v,"background",W.menuBackground),P(v,"-webkit-user-select","none"),P(v,"-moz-user-select","none"),P(v,"user-select","none"),P(v,"text-align","left"),P(v,"border-bottom",W.menuSeparatorWidth+"px solid "+W.menuSeparatorColor),P(v,"cursor","default"),P(v,"overflow","auto"),P(v,"white-space","nowrap"),P(v,"font",W.menuLabelFont),P(v,"color",W.menuLabelColor),P(v,"box-sizing","border-box"),P(v,"-moz-box-sizing","border-box"),P(Z,"list-style","none"),P(Z,"margin",F),P(Z,"padding",F),P(Z,"display","inline-block"),m(v,Z),C.setItems(n),C.$2g=function(o){C.$3g(o)},C.$4g=function(x){C.$5g(x)},C.$6g=function(w){C.$7g(w)},C.$8g=function(s){C.$9g(s)},C.$9b=function(B){C.$10g(B)},C._autoShow=!0,C.setAutoShow(!1),M.afterHide=function(){C.$11g()},M.afterShow=function(){C.$12g()},I(k(),"keydown",M.$3b),C.$3b=function(D){C.$13g(D)},C.invalidate()},A("Menu",h,{_items:b,$14g:W.menuHoverBackground,$15g:W.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(m){var E=this;if(E.$21g=m,E.setItems(E._items),"largeicons"===m){for(var A=E._view.querySelectorAll(".header-item"),n=0,k=0;k<A.length;k++){var d=A[k];n=Math.max(n,d.clientWidth)}for(var k=0;k<A.length;k++){var d=A[k];P(d,"min-width",n+R)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(u){this.$22g=u;for(var G=this._view.querySelectorAll(".header-item"),B=0;B<G.length;B++){var m=G[B];P(m,"margin-left",u+R),P(m,"margin-right",u+R)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(p){this.$23g=p;for(var S=this._view.querySelectorAll(".header-item"),F=0;F<S.length;F++){var v=S[F];P(v,"margin-top",p+R),P(v,"margin-bottom",p+R)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(R){this.$24g=R,P(this._view,"text-align",R)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var o=this,F=o._enableGlobalKey;F===!1&&(u(k(),"keydown",o.$3b),o._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,I(k(),"keydown",this.$3b)},setHoverBackground:function(B){this.$14g=B},setHoverColor:function(o){this.$15g=o},setItems:function(R){var t=this,d=t._view,I=t.$21g;if(t._items=R,d.children[0][E]="",t.$16g={},R&&R.length){for(var S=d.children[0],F=0,b=k().createDocumentFragment();F<R.length;F++){var f=R[F],K=c("li"),v=c("span");if(f.icon){var B=p();B[y]="menu-item-icon","smallicons"===I?(P(B,"height","1.2em"),P(B,"width","1.2em"),P(B,"vertical-align","middle")):(P(B,"height","32px"),P(B,"width","32px"),P(B,"display","block"),P(B,"margin","0 auto")),B.$20g=f.icon,m(K,B)}K[y]="header-item",P(K,"display","inline-block"),P(K,"vertical-align","top"),P(K,"padding","0 1.2em"),P(K,"line-height","1.8em"),"largeicons"===I&&P(K,"text-align","center"),P(K,"background-color","rgba(0,0,0,0)"),K.setAttribute("data-index",F),t.$16g[F]=f.items,v[E]=f.label,"iconsonly"!==I&&m(K,v),m(b,K)}m(S,b)}},showDropdownMenu:function(Y){var I=this,b=I.$16g[Y],R=I.$1g,X=I._view.children[0].children[Y],q=I.$17g;if(X&&X!==q){q&&I.hideDropdownMenu();var c=X.getBoundingClientRect(),T=W.getWindowInfo();I.$17g=X,R.setItems(b),R.show(c.left+T.left,c.top+c.height+T.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(r,q){var o=this,Y=o._items;return Y&&0!==Y.length?o.$1g.getItemByProperty(r,q,Y):b},$12g:function(){var Z=this,G=Z.$17g;G.style.background=Z.$14g,G.style.color=Z.$15g,Z._autoShow||u(k(),N?"touchstart":"mousedown",Z.$9b)},$11g:function(){var M=this,p=M.$17g;p&&(p.style.background="",p.style.color="",M.$17g=b),I(k(),N?"touchstart":"mousedown",M.$9b)},$10g:function(T){var L=this,W=L._view,H=L.$1g,s=W.children[0];!k().body.contains(W)||s.contains(T.target)||H._view.contains(T.target)||L.hideDropdownMenu()},$13g:function(q){var _=this,e=_.$1g;k().body.contains(_._view)&&e.$13b.$4b.call(e.$13b,q,_._items)},setAutoShow:function(a){var j=this,R=j.$1g,X=j._view;j._autoShow!==a&&(j._autoShow?(I(X,"mouseover",j.$2g),I(X,"mouseout",j.$4g),I(R._view,"mouseout",j.$4g),N||(u(X,"mouseover",j.$8g),u(X,"mouseout",j.$8g)),u(X,N?"touchstart":"mousedown",j.$6g)):(I(X,"mouseover",j.$8g),I(X,"mouseout",j.$8g),I(X,N?"touchstart":"mousedown",j.$6g),I(k(),N?"touchstart":"mousedown",j.$9b),N||(u(X,"mouseover",j.$2g),u(X,"mouseout",j.$4g),u(R._view,"mouseout",j.$4g))),j._autoShow=a)},$3g:function(I){var o=this,T=o._view.children[0],m=I.target;if(T!==m&&T.contains(m)){for(;"header-item"!==m[y];)m=m.parentNode;o.showDropdownMenu(m.getAttribute("data-index"))}},$5g:function(f){var W=this,P=W._view.children[0],p=W.$1g,r=f.target,q=f.relatedTarget;!P.contains(r)&&!p._view.contains(r)||P.contains(q)||p._view.contains(q)||W.hideDropdownMenu()},$7g:function(D){D.preventDefault();var E=this,r=E._view.children[0],o=E.$1g,S=D.target;if(W.isLeftButton(D)&&r!==S&&r.contains(S))if(N){for(;"header-item"!==S[y];)S=S.parentNode;var v=S.getAttribute("data-index"),o=E.$1g,b=E._view.children[0].children[v],c=E.$17g;o.isShowing()&&E.hideDropdownMenu(),b!==c&&E.showDropdownMenu(v)}else if(o.isShowing())E.hideDropdownMenu();else{for(;"header-item"!==S[y];)S=S.parentNode;E.showDropdownMenu(S.getAttribute("data-index"))}},$9g:function(n){var N=this,g=N._view,e=N.$1g,o=n.target;if(g.contains(o)){for(var W=g.querySelectorAll(".header-item"),q=b,y=0;y<W.length;y++){var O=W[y];O.style.background="",O.style.color="","mouseover"===n.type?O.contains(o)&&(q=O):"mouseout"===n.type&&e.isShowing()&&N.$17g===O&&(q=O)}e.isShowing()&&(q||(q=N.$17g),N.showDropdownMenu(q.getAttribute("data-index"))),q&&(q.style.background=N.$14g,q.style.color=N.$15g)}},getShowingMenuIndex:function(){var b=this.$17g;return b?b.getAttribute("data-index"):-1},addTo:function(v){var P=this,h=P._view;m(v,h),P.invalidate()},dispose:function(){var E=this,X=E._view,n=E.$1g;X&&(E._autoShow?(I(X,"mouseover",E.$2g),I(X,"mouseout",E.$4g),I(n._view,"mouseout",E.$4g)):(I(X,"mouseover",E.$8g),I(X,"mouseout",E.$8g),I(X,N?"touchstart":"mousedown",E.$6g),I(k(),N?"touchstart":"mousedown",E.$9b)),I(k(),"keydown",E.$3b),n.dispose(),X.parentNode&&S(X.parentNode,X),E._view=E.$1g=E.$16g=E._items=E.$17g=E.$2g=E.$4g=E.$6g=E.$8g=E.$9b=E.$3b=b)},$19g:function(h,Z,m,z){var d=L.initContext(h);L.translateAndScale(d,0,0,1),d.clearRect(0,0,m,z),W.drawStretchImage(d,W.getImage(Z),"fill",0,0,m,z),d.restore()},validateImpl:function(){var d,h,r,f=this,X=f._view,i=X.querySelectorAll(".menu-item-icon");for(r=0;r<i.length;r++){var K=i[r];d=K.clientWidth,h=K.clientHeight,d&&h&&(L.setCanvas(K,d,h),f.$19g(K,W.getImage(K.$20g),d,h))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);