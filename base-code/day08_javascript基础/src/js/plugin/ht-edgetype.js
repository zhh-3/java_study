!function(A){"use strict";var i="ht",X=A[i],e=Math,f=e.max,U=e.min,t=e.abs,w=e.atan2,B=(e.cos,e.sin,e.ceil),P=X.Default,T=P.getInternal(),d=X.List,l=T.Mat,G=T.getNodeRect,p=T.intersectionLineRect,k=P.getDistance,y=P.setEdgeType,R="left",K="right",W="top",L="bottom",$="edge.type",O="edge.gap",M="edge.center",_="edge.extend",j=function(F,$){return G(F,$).width},E=function(x,L){return G(x,L).height},S=function(Z,M){return T.getEdgeAgentPosition(Z,M._40I,M.s("edge.source.position"),M.s("edge.source.offset.x"),M.s("edge.source.offset.y"),M.s("edge.source.anchor.x"),M.s("edge.source.anchor.y"))},C=function(m,Y){return T.getEdgeAgentPosition(m,Y._41I,Y.s("edge.target.position"),Y.s("edge.target.offset.x"),Y.s("edge.target.offset.y"),Y.s("edge.target.anchor.x"),Y.s("edge.target.anchor.y"))},m=function(V,G){var U=V.s($),h=V.getEdgeGroup();if(h){var i=0;if(h.eachSiblingEdge(function(W){G.isVisible(W)&&W.s($)==U&&i++}),i>1)return V.s(O)*(i-1)/2}return 0},V=function(l,X){var F=l.s($),y=l.isLooped();if(!l.getEdgeGroup())return y?l.s(O):0;var I,f=0,x=0,K=0;return l.getEdgeGroup().getSiblings().each(function(m){m.each(function(H){if(H._40I===l._40I&&H.s($)==F&&X.isVisible(H)){var E=H.s(O);I?(x+=K/2+E/2,K=E):(I=H,K=E),H===l&&(f=x)}})}),y?x-f+K:f-x/2},N=function(R,S){var J=S.s("edge.corner.radius");return P.toRoundedCorner(R,J)};T.addMethod(X.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),y("boundary",function(I,X,u,Q){Q||(X=-X);var r,c=S(u,I),O=C(u,I),e=G(u,I._40I),W=G(u,I._41I),m=new l(w(O.y-c.y,O.x-c.x)),f=k(c,O),V=c.x,M=c.y;return r=m.tf(0,X),c={x:r.x+V,y:r.y+M},r=m.tf(f,X),O={x:r.x+V,y:r.y+M},r=p(c,O,e),r&&(c={x:r[0],y:r[1]}),r=p(c,O,W),r&&(O={x:r[0],y:r[1]}),{points:new d([c,O])}}),y("ripple",function(L,o,s,R){R||(o=-o);var j=S(s,L),x=C(s,L),E=k(j,x),g=U(L.s("edge.offset"),E/2),V=L.s("edge.ripple.size"),P=L.s("edge.ripple.length"),z=L.s("edge.ripple.both"),p=L.s(M),v=L.s("edge.ripple.elevation"),m=new d,J=L.s("edge.ripple.straight")?null:new d,Q=new l(w(x.y-j.y,x.x-j.x));R||(v=-v),E-=2*g,P>0&&(V=B(E/P));var f=E/V;J&&J.add(1);for(var K=0;V>K;K++)J&&J.add(3),0===K?m.add({x:g+f*K,y:p?0:o}):m.add({x:g+f*K,y:o}),m.add({x:g+f*K+f/2,y:v+o}),z&&(v=-v);for(m.add({x:g+E,y:p?0:o}),K=0;K<m.size();K++){var n=Q.tf(m.get(K));n.x+=j.x,n.y+=j.y,m.set(K,n)}return{points:m,segments:J}}),y("h.v",function(Z,f,X){f=V(Z,X);var c=new d,J=Z.s(M),W=S(X,Z),P=W.x,g=W.y,b=C(X,Z),R=b.x,n=b.y,L=0,x=0,u=R-P,s=n-g;return J||(L=j(X,Z._40I)/2,x=E(X,Z._41I)/2),u>=0&&0>=s?(c.add({x:P+L,y:g+f}),c.add({x:R+f,y:g+f}),c.add({x:R+f,y:n+x})):0>=u&&s>=0?(c.add({x:P-L,y:g+f}),c.add({x:R+f,y:g+f}),c.add({x:R+f,y:n-x})):u>=0&&s>=0?(c.add({x:P+L,y:g+f}),c.add({x:R-f,y:g+f}),c.add({x:R-f,y:n-x})):(c.add({x:P-L,y:g+f}),c.add({x:R-f,y:g+f}),c.add({x:R-f,y:n+x})),N(c,Z)}),y("v.h",function(r,P,B){P=V(r,B);var z=new d,n=r.s(M),k=S(B,r),D=k.x,$=k.y,h=C(B,r),q=h.x,J=h.y,Y=0,T=0,R=q-D,K=J-$;return n||(Y=j(B,r._41I)/2,T=E(B,r._40I)/2),R>=0&&0>=K?(z.add({x:D+P,y:$-T}),z.add({x:D+P,y:J+P}),z.add({x:q-Y,y:J+P})):0>=R&&K>=0?(z.add({x:D+P,y:$+T}),z.add({x:D+P,y:J+P}),z.add({x:q+Y,y:J+P})):R>=0&&K>=0?(z.add({x:D-P,y:$+T}),z.add({x:D-P,y:J+P}),z.add({x:q-Y,y:J+P})):(z.add({x:D-P,y:$-T}),z.add({x:D-P,y:J+P}),z.add({x:q+Y,y:J+P})),N(z,r)}),y("ortho",function(x,w,J){var e=new d,n=x.s(M),P=x.s("edge.ortho"),G=x._40I,Z=x._41I,B=S(J,x),g=B.x,Y=B.y,$=C(J,x),p=$.x,Q=$.y,V=p-g,b=Q-Y,D=n?0:j(J,G)/2,A=n?0:E(J,G)/2,F=n?0:j(J,Z)/2,q=n?0:E(J,Z)/2,y=(V-(D+F)*(V>0?1:-1))*P,I=(b-(A+q)*(b>0?1:-1))*P;return t(V)<t(b)?V>=0&&0>=b?(e.add({x:g+w,y:Y-A}),e.add({x:g+w,y:Y+I+w-A}),e.add({x:p+w,y:Y+I+w-A}),e.add({x:p+w,y:Q+q})):0>=V&&b>=0?(e.add({x:g+w,y:Y+A}),e.add({x:g+w,y:Y+I+w+A}),e.add({x:p+w,y:Y+I+w+A}),e.add({x:p+w,y:Q-q})):V>=0&&b>=0?(e.add({x:g+w,y:Y+A}),e.add({x:g+w,y:Y+I-w+A}),e.add({x:p+w,y:Y+I-w+A}),e.add({x:p+w,y:Q-q})):(e.add({x:g+w,y:Y-A}),e.add({x:g+w,y:Y+I-w-A}),e.add({x:p+w,y:Y+I-w-A}),e.add({x:p+w,y:Q+q})):V>=0&&0>=b?(e.add({x:g+D,y:Y+w}),e.add({x:g+y+w+D,y:Y+w}),e.add({x:g+y+w+D,y:Q+w}),e.add({x:p-F,y:Q+w})):0>=V&&b>=0?(e.add({x:g-D,y:Y+w}),e.add({x:g+y+w-D,y:Y+w}),e.add({x:g+y+w-D,y:Q+w}),e.add({x:p+F,y:Q+w})):V>=0&&b>=0?(e.add({x:g+D,y:Y+w}),e.add({x:g+y-w+D,y:Y+w}),e.add({x:g+y-w+D,y:Q+w}),e.add({x:p-F,y:Q+w})):(e.add({x:g-D,y:Y+w}),e.add({x:g+y-w-D,y:Y+w}),e.add({x:g+y-w-D,y:Q+w}),e.add({x:p+F,y:Q+w})),N(e,x)}),y("flex",function(i,y,c){var _=new d,s=i.s("edge.flex")+m(i,c),Q=i.s(M),u=i._40I,J=i._41I,W=S(c,i),q=W.x,Y=W.y,Z=C(c,i),z=Z.x,p=Z.y,b=z-q,B=p-Y,g=Q?0:j(c,u)/2,U=Q?0:E(c,u)/2,L=Q?0:j(c,J)/2,R=Q?0:E(c,J)/2,x=b>0?s:-s,l=B>0?s:-s;return t(b)<t(B)?b>=0&&0>=B?(_.add({x:q+y,y:Y-U}),_.add({x:q+y,y:Y+l+y-U}),_.add({x:z+y,y:p-l+y+R}),_.add({x:z+y,y:p+R})):0>=b&&B>=0?(_.add({x:q+y,y:Y+U}),_.add({x:q+y,y:Y+l+y+U}),_.add({x:z+y,y:p-l+y-R}),_.add({x:z+y,y:p-R})):b>=0&&B>=0?(_.add({x:q+y,y:Y+U}),_.add({x:q+y,y:Y+l-y+U}),_.add({x:z+y,y:p-l-y-R}),_.add({x:z+y,y:p-R})):(_.add({x:q+y,y:Y-U}),_.add({x:q+y,y:Y+l-y-U}),_.add({x:z+y,y:p-l-y+R}),_.add({x:z+y,y:p+R})):b>=0&&0>=B?(_.add({x:q+g,y:Y+y}),_.add({x:q+x+y+g,y:Y+y}),_.add({x:z-x+y-L,y:p+y}),_.add({x:z-L,y:p+y})):0>=b&&B>=0?(_.add({x:q-g,y:Y+y}),_.add({x:q+x+y-g,y:Y+y}),_.add({x:z-x+y+L,y:p+y}),_.add({x:z+L,y:p+y})):b>=0&&B>=0?(_.add({x:q+g,y:Y+y}),_.add({x:q+x-y+g,y:Y+y}),_.add({x:z-x-y-L,y:p+y}),_.add({x:z-L,y:p+y})):(_.add({x:q-g,y:Y+y}),_.add({x:q+x-y-g,y:Y+y}),_.add({x:z-x-y+L,y:p+y}),_.add({x:z+L,y:p+y})),N(_,i)}),y("extend.east",function(v,b,B){var D=new d,I=v.s(_)+m(v,B),W=v.s(M),g=S(B,v),q=g.x+(W?0:j(B,v._40I)/2),K=g.y,e=C(B,v),F=e.x+(W?0:j(B,v._41I)/2),$=e.y,a=f(q,F)+I;return K>$?(D.add({x:q,y:K+b}),D.add({x:a+b,y:K+b}),D.add({x:a+b,y:$-b}),D.add({x:F,y:$-b})):(D.add({x:q,y:K-b}),D.add({x:a+b,y:K-b}),D.add({x:a+b,y:$+b}),D.add({x:F,y:$+b})),N(D,v)}),y("extend.west",function(Z,u,k){var y=new d,e=Z.s(_)+m(Z,k),Y=Z.s(M),Q=S(k,Z),l=Q.x-(Y?0:j(k,Z._40I)/2),P=Q.y,a=C(k,Z),r=a.x-(Y?0:j(k,Z._41I)/2),f=a.y,W=U(l,r)-e;return P>f?(y.add({x:l,y:P+u}),y.add({x:W-u,y:P+u}),y.add({x:W-u,y:f-u}),y.add({x:r,y:f-u})):(y.add({x:l,y:P-u}),y.add({x:W-u,y:P-u}),y.add({x:W-u,y:f+u}),y.add({x:r,y:f+u})),N(y,Z)}),y("extend.north",function(n,l,i){var x=new d,R=n.s(_)+m(n,i),F=n.s(M),Y=S(i,n),K=Y.x,$=Y.y-(F?0:E(i,n._40I)/2),k=C(i,n),u=k.x,s=k.y-(F?0:E(i,n._41I)/2),h=U($,s)-R;return K>u?(x.add({y:$,x:K+l}),x.add({y:h-l,x:K+l}),x.add({y:h-l,x:u-l}),x.add({y:s,x:u-l})):(x.add({y:$,x:K-l}),x.add({y:h-l,x:K-l}),x.add({y:h-l,x:u+l}),x.add({y:s,x:u+l})),N(x,n)}),y("extend.south",function(X,J,L){var o=new d,w=X.s(_)+m(X,L),r=X.s(M),q=S(L,X),t=q.x,G=q.y+(r?0:E(L,X._40I)/2),K=C(L,X),n=K.x,p=K.y+(r?0:E(L,X._41I)/2),T=f(G,p)+w;return t>n?(o.add({y:G,x:t+J}),o.add({y:T+J,x:t+J}),o.add({y:T+J,x:n-J}),o.add({y:p,x:n-J})):(o.add({y:G,x:t-J}),o.add({y:T+J,x:t-J}),o.add({y:T+J,x:n+J}),o.add({y:p,x:n+J})),N(o,X)});var v=function(m,b,c,L,V){if(L.sort(function(D,v){var u=D.getSourceAgent()===b?D.getTargetAgent():D.getSourceAgent(),m=v.getSourceAgent()===b?v.getTargetAgent():v.getSourceAgent(),I=u.p(),F=m.p();if(c===R||c===K){if(I.y>F.y)return 1;if(I.y<F.y)return-1}else{if(I.x>F.x)return 1;if(I.x<F.x)return-1}return P.sortFunc(D.getId(),v.getId())}),V){for(var X,j,t,q=m.getSourceAgent(),v=m.getTargetAgent(),H=0;H<L.size();H++){var x=L.get(H);x.getSourceAgent()===q&&x.getTargetAgent()===v||x.getTargetAgent()===q&&x.getSourceAgent()===v?(j||(j=new d),j.add(x,0)):j?(t||(t=new d),t.add(x)):(X||(X=new d),X.add(x))}L.clear(),X&&L.addAll(X),j&&L.addAll(j),t&&L.addAll(t)}var W=L.indexOf(m),u=L.size(),s=m.s(O);return{side:c,index:W,size:u,offset:-s*(u-1)/2+s*W}},n=function(r,h,K,z,y){var H=h.s($);return v(h,K,z,K.getAgentEdges().toList(function(W){return r.isVisible(W)&&W.s($)===H}),y)},x=function(B,X){var w=B.getSourceAgent()===X?B.getTargetAgent():B.getSourceAgent(),e=X.p(),A=w.p(),O=A.x-e.x,T=A.y-e.y;return O>0&&t(T)<=O?K:0>O&&t(T)<=-O?R:T>0&&t(O)<=T?L:W},c=function(p,K,B){var V=K.s($),m=x(K,B);return v(K,B,m,B.getAgentEdges().toList(function(v){return p.isVisible(v)&&v.s($)===V&&x(v,B)===m}))},D=function(O,V){var Q=O.getSourceAgent()===V,i=Q?O.getTargetAgent():O.getSourceAgent(),o=V.p(),y=i.p();return Q?o.y>y.y?W:L:o.x<y.x?K:R},Z=function(g,c,I){var i=c.s($),n=D(c,I);return v(c,I,n,I.getAgentEdges().toList(function(H){return g.isVisible(H)&&H.s($)===i&&D(H,I)===n}),n===K||n===L)},H=function(u,Q){var h=u.getSourceAgent()===Q,B=h?u.getTargetAgent():u.getSourceAgent(),e=Q.p(),i=B.p();return h?e.x<i.x?K:R:e.y>i.y?W:L},r=function(h,j,k){var w=j.s($),W=H(j,k);return v(j,k,W,k.getAgentEdges().toList(function(E){return h.isVisible(E)&&E.s($)===w&&H(E,k)===W}),W===K||W===L)},F=function(t,e,c){var I=t.getSourceAgent(),u=t.getTargetAgent(),O=I.getId()>u.getId(),H=O?u:I,B=O?I:u,b=H.p(),P=B.p(),v=c(e,t,H),m=c(e,t,B),C=t.s(M),_=C?0:j(e,H)/2,l=C?0:j(e,B)/2,s=C?0:E(e,H)/2,T=C?0:E(e,B)/2,D=v.offset,g=m.offset,w=v.side,$=m.side,X=new d;return w===W?(X.add({x:b.x+D,y:b.y-s}),X.add({x:b.x+D,y:P.y+g}),$===R?X.add({x:P.x-l,y:P.y+g}):X.add({x:P.x+l,y:P.y+g})):w===L?(X.add({x:b.x+D,y:b.y+s}),X.add({x:b.x+D,y:P.y+g}),$===R?X.add({x:P.x-l,y:P.y+g}):X.add({x:P.x+l,y:P.y+g})):w===R?(X.add({x:b.x-_,y:b.y+D}),X.add({x:P.x+g,y:b.y+D}),$===L?X.add({x:P.x+g,y:P.y+T}):X.add({x:P.x+g,y:P.y-T})):w===K&&(X.add({x:b.x+_,y:b.y+D}),X.add({x:P.x+g,y:b.y+D}),$===L?X.add({x:P.x+g,y:P.y+T}):X.add({x:P.x+g,y:P.y-T})),O&&X.reverse(),N(X,t)};y("ortho2",function(w,P,G){var y,V,t=w.s(M),H=w.s("edge.ortho"),f=w.getSourceAgent(),$=w.getTargetAgent(),g=f.getId()>$.getId(),T=g?$:f,C=g?f:$,x=T.p(),Y=C.p(),z=c(G,w,T),X=c(G,w,C),Z=t?0:j(G,T)/2,k=t?0:E(G,T)/2,r=t?0:j(G,C)/2,F=t?0:E(G,C)/2,Q=new d,U=z.offset,o=X.offset,h=z.side;return h===K?(y=Y.y>x.y?-U:U,V=x.x+Z+(Y.x-r-x.x-Z)*H,Q.add({x:x.x+Z,y:x.y+U}),Q.add({x:V+y,y:x.y+U}),Q.add({x:V+y,y:Y.y+o}),Q.add({x:Y.x-r,y:Y.y+o})):h===R?(y=Y.y>x.y?-U:U,V=x.x-Z-(x.x-Z-Y.x-r)*H,Q.add({x:x.x-Z,y:x.y+U}),Q.add({x:V-y,y:x.y+U}),Q.add({x:V-y,y:Y.y+o}),Q.add({x:Y.x+r,y:Y.y+o})):h===L?(y=Y.x>x.x?-U:U,V=x.y+k+(Y.y-F-x.y-k)*H,Q.add({x:x.x+U,y:x.y+k}),Q.add({x:x.x+U,y:V+y}),Q.add({x:Y.x+o,y:V+y}),Q.add({x:Y.x+o,y:Y.y-F})):h===W&&(y=Y.x>x.x?-U:U,V=x.y-k-(x.y-k-Y.y-F)*H,Q.add({x:x.x+U,y:x.y-k}),Q.add({x:x.x+U,y:V-y}),Q.add({x:Y.x+o,y:V-y}),Q.add({x:Y.x+o,y:Y.y+F})),g&&Q.reverse(),N(Q,w)},!0),y("flex2",function(l,r,V){var f,q=l.getSourceAgent(),n=l.getTargetAgent(),$=q.getId()>n.getId(),i=$?n:q,F=$?q:n,e=i.p(),k=F.p(),Z=c(V,l,i),I=c(V,l,F),D=l.s(M),t=l.s("edge.flex")+(Z.size-1)/2*l.s(O),P=D?0:j(V,i)/2,J=D?0:E(V,i)/2,T=D?0:j(V,F)/2,o=D?0:E(V,F)/2,h=new d,b=Z.offset,Q=I.offset,u=Z.side;return u===K?(f=k.y>e.y?-b:b,h.add({x:e.x+P,y:e.y+b}),h.add({x:e.x+P+t+f,y:e.y+b}),h.add({x:k.x-T-t+f,y:k.y+Q}),h.add({x:k.x-T,y:k.y+Q})):u===R?(f=k.y>e.y?-b:b,h.add({x:e.x-P,y:e.y+b}),h.add({x:e.x-P-t-f,y:e.y+b}),h.add({x:k.x+T+t-f,y:k.y+Q}),h.add({x:k.x+T,y:k.y+Q})):u===L?(f=k.x>e.x?-b:b,h.add({x:e.x+b,y:e.y+J}),h.add({x:e.x+b,y:e.y+J+t+f}),h.add({x:k.x+Q,y:k.y-o-t+f}),h.add({x:k.x+Q,y:k.y-o})):u===W&&(f=k.x>e.x?-b:b,h.add({x:e.x+b,y:e.y-J}),h.add({x:e.x+b,y:e.y-J-t-f}),h.add({x:k.x+Q,y:k.y+o+t-f}),h.add({x:k.x+Q,y:k.y+o})),$&&h.reverse(),N(h,l)},!0),y("extend.north2",function(v,S,B){var h=v.getSourceAgent(),Z=v.getTargetAgent(),g=h.getId()>Z.getId(),t=g?Z:h,K=g?h:Z,p=t.p(),r=K.p(),I=n(B,v,t,W),m=n(B,v,K,W,!0),f=v.s(M),Y=f?0:E(B,t)/2,a=f?0:E(B,K)/2,F=I.offset,i=m.offset,Q=v.s(_)+(I.size-1)/2*v.s(O),x=U(p.y-Y,r.y-a)-Q+(p.x<r.x?F:-F),l=new d;return l.add({x:p.x+F,y:p.y-Y}),l.add({x:p.x+F,y:x}),l.add({x:r.x+i,y:x}),l.add({x:r.x+i,y:r.y-a}),g&&l.reverse(),N(l,v)},!0),y("extend.south2",function(p,w,z){var k=p.getSourceAgent(),T=p.getTargetAgent(),P=k.getId()>T.getId(),y=P?T:k,c=P?k:T,Y=y.p(),o=c.p(),V=n(z,p,y,L),b=n(z,p,c,L,!0),u=p.s(M),q=u?0:E(z,y)/2,A=u?0:E(z,c)/2,i=V.offset,D=b.offset,F=p.s(_)+(V.size-1)/2*p.s(O),s=f(Y.y+q,o.y+A)+F+(Y.x>o.x?i:-i),U=new d;return U.add({x:Y.x+i,y:Y.y+q}),U.add({x:Y.x+i,y:s}),U.add({x:o.x+D,y:s}),U.add({x:o.x+D,y:o.y+A}),P&&U.reverse(),N(U,p)},!0),y("extend.west2",function(b,a,R){var H=b.getSourceAgent(),B=b.getTargetAgent(),x=H.getId()>B.getId(),Q=x?B:H,h=x?H:B,g=Q.p(),J=h.p(),m=n(R,b,Q,W),Y=n(R,b,h,W,!0),l=b.s(M),V=l?0:j(R,Q)/2,o=l?0:j(R,h)/2,L=m.offset,Z=Y.offset,c=b.s(_)+(m.size-1)/2*b.s(O),$=U(g.x-V,J.x-o)-c+(g.y<J.y?L:-L),i=new d;return i.add({x:g.x-V,y:g.y+L}),i.add({x:$,y:g.y+L}),i.add({x:$,y:J.y+Z}),i.add({x:J.x-o,y:J.y+Z}),x&&i.reverse(),N(i,b)},!0),y("extend.east2",function(I,K,p){var X=I.getSourceAgent(),A=I.getTargetAgent(),z=X.getId()>A.getId(),w=z?A:X,U=z?X:A,F=w.p(),k=U.p(),y=n(p,I,w,W),P=n(p,I,U,W,!0),q=I.s(M),m=q?0:j(p,w)/2,D=q?0:j(p,U)/2,x=y.offset,G=P.offset,u=I.s(_)+(y.size-1)/2*I.s(O),C=f(F.x+m,k.x+D)+u+(F.y>k.y?x:-x),J=new d;return J.add({x:F.x+m,y:F.y+x}),J.add({x:C,y:F.y+x}),J.add({x:C,y:k.y+G}),J.add({x:k.x+D,y:k.y+G}),z&&J.reverse(),N(J,I)},!0),y("v.h2",function($,c,R){return F($,R,Z)},!0),y("h.v2",function(K,S,t){return F(K,t,r)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);