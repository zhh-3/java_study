!function(F,V,r){"use strict";var K="ht",i=F[K],p=null,q=Math,P=q.abs,x=q.max,b=Number.MAX_VALUE,_=i.Default,H=_.getInternal(),T=_.clone,N=H.vec3TransformMat4,C=H.appendArray,y=function(){var f=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,u=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,q=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,l=function(d,Q){return Q=parseInt(Q),Q>=0?d[Q-1]:d[Q+d.length]},y=function(W,j,h,w,a,B){if(W.vs){var M=l(j,w),r=l(j,a),Q=l(j,B),d=h.matrix,f=W.vs;if(h.flipFace){var e=r;r=Q,Q=e}d?(C(f,N(T(M),d)),C(f,N(T(r),d)),C(f,N(T(Q),d))):(C(f,M),C(f,r),C(f,Q))}},I=function(O,N,H,j,A,w){if(O.vs){var V=l(N,j),Q=l(N,A),Y=l(N,w),a=H.flipY;if(H.flipFace){var Z=Q;Q=Y,Y=Z}O.uv.push(V[0],a?1-V[1]:V[1],Q[0],a?1-Q[1]:Q[1],Y[0],a?1-Y[1]:Y[1])}},Q=function(M,a,A,t,P,u){if(M.vs){var S=l(a,t),j=l(a,P),v=l(a,u),f=A.normalMatrix,c=M.ns;if(A.flipFace){var $=j;j=v,v=$}f?(C(c,N(T(S),f)),C(c,N(T(j),f)),C(c,N(T(v),f))):(C(c,S),C(c,j),C(c,v))}},K=function(E,l,m,T,a,G,C,K){var i=T&&T.length&&K;G[3]===r?(y(E,l,a,G[0],G[1],G[2]),C&&I(E,m,a,C[0],C[1],C[2]),i&&Q(E,T,a,K[0],K[1],K[2])):(y(E,l,a,G[0],G[1],G[3]),y(E,l,a,G[1],G[2],G[3]),C&&(I(E,m,a,C[0],C[1],C[3]),I(E,m,a,C[1],C[2],C[3])),i&&(Q(E,T,a,K[0],K[1],K[3]),Q(E,T,a,K[1],K[2],K[3])))},J=function(I,p,Y,X){var T,z,d,W,N,B,$,a=b,L=b,V=b,v=-b,A=-b,r=-b;for(T in I)for(B=I[T].vs,$=B.length,z=0;$>z;z+=3)d=B[z+0],W=B[z+1],N=B[z+2],a>d&&(a=d),L>W&&(L=W),V>N&&(V=N),d>v&&(v=d),W>A&&(A=W),N>r&&(r=N);if(Y){var s=a+(v-a)/2,w=L+(A-L)/2,Q=V+(r-V)/2;for(T in I)for(B=I[T].vs,$=B.length,z=0;$>z;z+=3)B[z+0]-=s,B[z+1]-=w,B[z+2]-=Q}var o,u,J;Y?(o=v-a,u=A-L,J=r-V):(o=2*x(P(a),P(v)),u=2*x(P(L),P(A)),J=2*x(P(V),P(r))),X.rawS3=[o,u,J];for(T in I){if(B=I[T].vs,p)for($=B.length,z=0;$>z;z+=3)o&&(B[z+0]/=o),u&&(B[z+1]/=u),J&&(B[z+2]/=J);I[T].rawS3=X.rawS3}};return function(P,F,a){if(!P)return p;(H.isString(F)||F instanceof ArrayBuffer)&&(F=m(F)),a||(a={}),a.flipY==p&&(a.flipY=!0),(a.s3||a.r3||a.t3||a.mat)&&(a.matrix=H.createWorldMatrix(a.mat,a.s3,a.r3,a.rotationMode,a.t3));var v,G,X,b,d,i,k=[],y=[],Q=a.ignoreNormal?p:[],x=a.reverseFlipMtls,B={vs:[],uv:[],ns:Q?[]:p},V={htdefault:B},l=new t(P);for(Q&&a.matrix&&(a.normalMatrix=H.createNormalMatrix(a.matrix));null!=(G=l.stepNext());)if(G=G.trim(),0!==G.length&&"#"!==G.charAt(0))if(X=f.exec(G))k.push([parseFloat(X[1]),parseFloat(X[2]),parseFloat(X[3])]);else if(X=u.exec(G))y.push([parseFloat(X[1]),parseFloat(X[2])]);else if(Q&&(X=q.exec(G)))a.flipFace?Q.push([parseFloat(-X[1]),parseFloat(-X[2]),parseFloat(-X[3])]):Q.push([parseFloat(X[1]),parseFloat(X[2]),parseFloat(X[3])]);else if("f"===G[0]){var j=G.split(/\s+/);if(j.length<4)continue;var w,v,S,s=[],C=[],Y=[];for(v=1,S=j.length;S>v;v++)w=j[v].split("/"),s.push(parseInt(w[0],10)),w.length>1&&w[1].length>0&&Y.push(parseInt(w[1],10)),w.length>2&&w[2].length>0&&C.push(parseInt(w[2],10));for(v=0,S=s.length-2;S>v;v++)K(B,k,y,Q,a,[s[0],s[v+1],s[v+2]],Y.length?[Y[0],Y[v+1],Y[v+2]]:p,C.length?[C[0],C[v+1],C[v+2]]:p)}else if(/^usemtl /.test(G)&&(b=G.substring(7).trim(),!(B=V[b]))){if(B={name:b,vs:[],uv:[],ns:Q?[]:p},a.ignoreMtls&&a.ignoreMtls.indexOf(b)>=0&&delete B.vs,(a.reverseFlip||"*"===x||x&&x.indexOf(b)>=0)&&(B.reverseFlip=!0),F&&(d=F[b],d&&(a.ignoreColor||(B.color=d.kd),!a.ignoreTransparent&&d.d>0&&d.d<1&&(B.transparent=!0,B.opacity=d.d),!a.ignoreImage&&(i=d.map_kd)))){i=i.split(" ");var E=-1;for(v=0;v<i.length;v++)"-o"===i[v]?(B.uvOffset=[parseFloat(i[v+1]),parseFloat(i[v+2])],v+=2,E=v):"-s"===i[v]&&(B.uvScale=[parseFloat(i[v+1]),parseFloat(i[v+2])],v+=2,E=v);B.image=(a.prefix||"")+i.splice(E+1).join(" ")}V[b]=B}var D=[];for(var T in V){var O=V[T].vs;O&&0!==O.length||D.push(T)}D.forEach(function(Y){delete V[Y]}),J(V,a.cube,a.center,a);var L=a.shape3d;if(L){var A=[];for(var b in V){var B=V[b];A.rawS3=B.rawS3,A.push(B)}_.setShape3dModel(L,A)}return V}}(),m=function(X){var o={};if(X)for(var P,k,z,c,L,e,q=new t(X),b=/\s+/;null!=(k=q.stepNext());)k=k.trim(),0!==k.length&&"#"!==k.charAt(0)&&(z=k.indexOf(" "),c=(z?k.substring(0,z):k).toLowerCase(),L=(z?k.substring(z+1):"").trim(),"newmtl"===c?o[L]=P={name:L}:P&&("ka"===c||"kd"===c||"ks"===c?(e=L.split(b,3),P[c]=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),1]):P[c]="ns"===c||"d"===c?parseFloat(L):L));return o},t=function(h){var s=this;if(h instanceof ArrayBuffer){s.isBuffer=!0;var S=0,V=new Uint8Array(h),r=V.length,Q=V.length;s.stepNext=function(){for(var n,O,J=S;r>S;)if(n=V[S],O=n>>4,12===O||13==O)S+=2;else if(14===O)S+=3;else if(S++,10===n)return String.fromCharCode.apply(null,V.subarray(J,S));return S>J?String.fromCharCode.apply(null,V.subarray(J,S)):null}}else{s.isBuffer=!1;var W=h.split("\n"),k=0,Q=W.length;s.stepNext=function(){return Q>k?W[k++]:null}}};t.prototype={},t.prototype.constructor=t,H.addMethod(_,{loadObj:function(e,H,X){X=X||{};var P=!1;/(MSIE |Trident\/|Edge\/)/.test(F.navigator.userAgent)&&(P=!0);var Z=function($){var h,b=X.finishFunc,p=X.shape3d,u=$?y($[0],$[1],X):null;if(u){if(p)h=_.getShape3dModel(p);else{h=[];for(var s in u){var M=u[s];h.rawS3=M.rawS3,h.push(M)}}b&&b(u,h,h.rawS3)}else b&&b(null)};if(P){var q=function(I){X.responseType="arraybuffer",_.xhrLoad(e,function(A){Z([A,I])},X)};H?_.xhrLoad(H,function(y){q(y)},X):q()}else _.xhrLoad(H?[e,H]:[e],Z,X)},parseObj:function(P,o,R){return y(P,o,R)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);