!function(B,x){"use strict";var W="ht",u=B[W],_="position",k="absolute",M="px",j="left",K="top",g="innerHTML",n="className",U="width",p="height",s="0",N="display",e="none",F="visibility",J="user-select",C="margin",w="padding",v=null,D=u.Color,h=u.Default,z=h.getInternal(),Y=B.setTimeout,H=B.setInterval,d=B.clearTimeout,I=B.clearInterval,O=B.parseInt,T=h.isLeftButton,L=h.isDragging,r=h.startDragging,a=h.getDistance,t=h.isTouchable,P=D.widgetIconHighlight,E=D.widgetIconBorder,c=D.widgetIconGradient,Q=function(){return document},S=function(U,m){return U.querySelectorAll(m)},A=function(g){var z=Q().createElement(g);return"ul"===g&&(i(z,_,"relative"),i(z,C,s),i(z,w,s),i(z,"list-style",e),i(z,"box-sizing","border-box"),i(z,"-moz-box-sizing","border-box"),i(z,N,"inline-block"),i(z,"vertical-align","text-bottom"),i(z,"border","1px solid "+h.contextMenuBorderColor),i(z,"box-shadow","0 0 16px 1px "+h.contextMenuShadowColor),i(z,"overflow","hidden"),h.contextMenuBorderRadius&&i(z,"border-radius",h.contextMenuBorderRadius+M)),z},f=function(h){var G=h.touches[0];return G?G:h.changedTouches[0]},b=function(){return A("div")},$=function(){return A("canvas")},i=function(s,d,j){s.style.setProperty(d,j,v)},G=function(m,w,N){h.def(u.widget[m],w,N)},R=function(o,$){o.appendChild($)},V=function(B,N){B.removeChild(N)},m=h.eventListenerOptionsFalse,q=(h.eventListenerOptionsTrue,function(u,K,p,G){u.addEventListener(K,p,G?m:m)}),y=function(t,P,N,Z){t.removeEventListener(P,N,Z?m:m)};z.addMethod(h,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:E},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:P}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:E},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:P,gradient:h.imageGradient,gradientColor:c,background:P}]},contextMenuLabelFont:(t?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var o=function(S){var R=this,B=S._view;if(R.$11b=S,R.addListeners(),q(B,"contextmenu",function(R){R.preventDefault()}),!t){var W=R.$37b=R.$36b.bind(R);q(B,"mouseover",W),q(B,"mouseout",W)}};h.def(o,x,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(w){if(h.preventDefault(w),T(w)){for(var y=this,o=y.$11b,g=y.getView(),i=g.children,U=0;U<i.length;U++){var e=i[U],q=e.$24b,G=e.$25b;if(q&&q.contains(w.target))return o.scrollUp(e),y.$28b=Y(function(){y.$29b=H(function(){o.scrollUp(e)},100)},500),r(y,w),void 0;if(G&&G.contains(w.target))return o.scrollDown(e),y.$28b=Y(function(){y.$29b=H(function(){o.scrollDown(e)},100)},500),r(y,w),void 0}t&&(w=f(w)),y.$30b={x:w.pageX,y:w.pageY}}},handle_mousedown:function(M){this.handle_touchstart(M)},handle_touchend:function(i){if(T(i)){var e=this,p=e.$30b,k=t?{x:f(i).pageX,y:f(i).pageY}:{x:i.pageX,y:i.pageY};if(!p||a(p,k)>1)return delete e.$30b,void 0;for(var H=e.getView(),V=e.$11b,C=i.target,d=v,J=v,j=V._items,Y=H.$26b,G=0;G<Y.length;G++)if(J=Y[G],J.contains(C)){d=J.getAttribute("data-id");break}if(d&&j){var w=V.$17b(j,function(f){return f._id===d});if(w){var D=!1;w.disabled instanceof Function?D=w.disabled.call(V,w):w.disabled===!0&&(D=!0),D||(w.items?t&&e.$36b(J,!0):V.$1b(w,i))}}delete e.$30b}},$36b:function(W,m){if(!L()){var C,R=this,O=R.$11b,H=R.getView(),P=O.$20b||H.children[0],S=O.$19b,s=H.$26b,w=H.children,X=W.target,E=H.getBoundingClientRect(),B=h.getWindowInfo(),_=B.width,u=B.height,T=function(D){for(var M=0;M<w.length;M++){var K=w[M],s=new RegExp(D+"$"),H=K[n];if(H&&(s.test(H)||H.indexOf(D+" ")>=0))return K}},I=function(a){for(var r=0;r<s.length;r++){var z=s[r],X=new RegExp(a+"$"),h=z[n];if(h&&(X.test(h)||h.indexOf(a+" ")>=0))return z}},Q=function(e){var t=I("menu-item"+e.$45b),s=t.getBoundingClientRect(),Q=s.top-E.top,x=s.left-E.left;i(e,K,Q+M),i(e,j,x+s.width+M);var h=e.getBoundingClientRect(),S=h.top,N=h.left,w=h.height,m=h.width,A=S+w+2,$=N+m+2;A>u&&i(e,K,Q+u-A+M),$>_&&i(e,j,x-m+M)};if(m)C=W;else{if("mouseover"===W.type){for(var g=0;g<s.length;g++){var r=s[g];if(r.contains(X)){C=r;break}}if(!C&&S){var b=S.parentNode,e=T("submenu"+S.getAttribute("data-id"));(e&&e.contains(X)||b&&b.contains(X))&&(C=S)}}else if("mouseout"===W.type){for(var U=!1,p=W.relatedTarget,g=0;g<w.length;g++){var z=w[g];if("hidden"!==z.style.visibility&&z.contains(p)){U=!0;break}}if(U)return}!C&&P&&(C=I("menu-item"+(P.$45b||"NaN")))}if(C!=S){if(S)for(var y=S;y;){if(y[n]=y[n].replace(" menu-item-hover",""),y[n].indexOf("disabled")<0){var D=O.getItemByProperty("_id",y.getAttribute("data-id"));null!=D.background?D.background instanceof Function?i(y,"background-color",D.background.call(O,D)):i(y,"background-color",D.background):i(y,"background-color",h.contextMenuBackground),i(y,"color",h.contextMenuLabelColor)}var c=T("submenu"+y.getAttribute("data-id"));c&&i(c,F,"hidden");var Z=y.parentNode;y=I("menu-item"+(Z.$45b||"NaN"))}if(C){for(var o=C,d=[];o;){o[n]+=" menu-item-hover",o[n].indexOf("disabled")<0&&(i(o,"background-color",h.contextMenuHoverBackground),i(o,"color",h.contextMenuHoverLabelColor));var G=T("submenu"+o.getAttribute("data-id"));G&&(i(G,F,"visible"),d.push(G));var Z=o.parentNode;o=I("menu-item"+(Z.$45b||"NaN"))}d.reverse(),d.forEach(function(A){Q(A)})}}O.$19b=C,O.$20b=C?C.parentNode:H.children[0]}},handle_mouseup:function(e){this.handle_touchend(e)},handleWindowTouchEnd:function(){var p=this;p.$28b!=v&&(d(p.$28b),delete p.$28b),p.$29b!=v&&(I(p.$29b),delete p.$29b),delete p.$34b,delete p.$30b,delete p.$35b},handleWindowMouseUp:function(N){this.handleWindowTouchEnd(N)},handle_mousemove:function(P){this.handle_touchmove(P)},handle_touchmove:function(y){if(!L()&&T(y)){for(var Q=this,C=Q.getView().children,G=v,x=0;x<C.length;x++){var S=C[x];if(S.contains(y.target)){G=S;break}}var P=Q.$30b,d=t?{x:f(y).pageX,y:f(y).pageY}:{x:y.pageX,y:y.pageY};G&&P&&a(P,d)>2&&(r(Q,y),Q.$34b=G,Q.$35b=G.$18b)}},handleWindowTouchMove:function(J){J.preventDefault();var D=this,y=D.$11b,n=D.$34b,E=D.$35b,m=D.$30b;if(m&&n){var H=t?{x:f(J).pageX,y:f(J).pageY}:{x:J.pageX,y:J.pageY},l=H.y-m.y;l>0?y.scrollUp(n,n.$18b-(E-l)):y.scrollDown(n,E-l-n.$18b)}},handleWindowMouseMove:function($){this.handleWindowTouchMove($)},$10b:function(l,Y){l.preventDefault();for(var W=this,G=W.getView().children,A=v,T=0;T<G.length;T++){var i=G[T];if(i.contains(l.target)){A=i;break}}if(A){var H=this.$11b,C=H.getRowHeight();Math.abs(Y)>.05&&(Y>0?H.scrollUp(A,Y*C):0>Y&&H.scrollDown(A,-Y*C))}},handle_mousewheel:function(P){this.$10b(P,P.wheelDelta/40)},handle_DOMMouseScroll:function(N){this.$10b(N,-N.detail)},$44b:function(T){this.getView().contains(T.target)||this.$11b.hide()},$41b:function(A){this.$11b.show(A)},$4b:function(D,i){var E=this.$11b;if(i=i||E._items,i&&i.length&&D.keyCode){var w=[D.keyCode];D.shiftKey&&w.push(16),D.ctrlKey&&w.push(17),D.altKey&&w.push(18),/mac/.test(B.navigator?B.navigator.userAgent.toLowerCase():"")?D.metaKey&&w.push(17):D.metaKey&&w.push(91),w.sort();var o=w.join(),m=E.$17b(i,function(J){if(J.key){var B=J.key.slice(0);return B.sort(),o===B.join()}});if(m){m.preventDefault!==!1&&D.preventDefault();var P=!1;m.disabled instanceof Function?P=m.disabled.call(E,m):m.disabled===!0&&(P=!0),P||E.$1b(m,D)}}},$39b:function(G){var F=this,r=f(G);F.$32b={x:r.pageX,y:r.pageY}},$38b:function(B){var l=this,K=f(B);l.$31b={x:K.pageX,y:K.pageY},l.$33b=Y(function(){l.$31b&&(l.$32b?a(l.$31b,l.$32b)<10&&l.$11b.show(B):l.$11b.show(B)),delete l.$33b,delete l.$31b,delete l.$32b},600)},$40b:function(){var c=this;c.$33b!=v&&(d(c.$33b),delete c.$33b,delete c.$31b,delete c.$32b)}}),u.widget.ContextMenu=function(t){var c=this,g=c._view=z.createView(null,c);g[n]="ht-widget-contextmenu",c.setItems(t),c.$13b=new o(c),i(g,"font",h.contextMenuLabelFont),i(g,_,k),i(g,"cursor","default"),i(g,"-webkit-"+J,e),i(g,"-moz-"+J,e),i(g,"-ms-"+J,e),i(g,J,e),i(g,"box-sizing","border-box"),i(g,"-moz-box-sizing","border-box"),h.baseZIndex!=v&&i(g,"z-index",O(h.baseZIndex)+2+""),c.$3b=function(A){c.$13b.$4b(A)}},G("ContextMenu",x,{$5b:0,_items:v,$21b:v,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var $=this,H=$._enableGlobalKey;H===!1&&(q(Q(),"keydown",$.$3b),$._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,y(Q(),"keydown",this.$3b)},setItems:function(t){this._items=t},getItems:function(){return this._items},setVisibleFunc:function(p){this.$16b=p},setLabelMaxWidth:function(r){this.$43b=r},$1b:function(e,i){var R=this;if("check"===e.type)e.selected=!e.selected;else if("radio"===e.type){var J=e.groupId;R.$17b(R._items,function(K){K.groupId===J&&(K.selected=!1)}),e.selected=!0}if(R.hide(),e.action)e.action.apply(e.scope||R,[e,i]);else if(e.href){var c=e.linkTarget||"_self";B.open(e.href,c)}},getItemById:function(H){return this.getItemByProperty("id",H)},setItemVisible:function(F,N){var D=this.getItemById(F);D&&(D.visible=N)},getItemByProperty:function(e,H,Z){var l=this;if(Z=Z||l._items,!Z||0===Z.length)return v;var E=l.$17b(Z,function(i){return i[e]===H});return E||v},scrollUp:function(V,s){var Z=this;if(s=s==v?20:s,s=O(s),0!==s){var Y=0;V.$18b>s&&(Y=V.$18b-s),Z.$42b(V,Y),V.scrollTop=Y,V.$18b=Y}},scrollDown:function(d,E){var Y=this;if(E=E==v?20:E,E=O(E),0!==E){var D=d.$22b,w=d.$23b,e=D-w;w+d.$18b+E<D&&(e=d.$18b+E),Y.$42b(d,e),d.scrollTop=e,d.$18b=e}},$42b:function(E,b){b=b==v?E.$18b:b;var L=E.$24b,J=E.$25b;L&&(i(L,"top",b+M),0==b?i(L,N,e):i(L,N,"block")),J&&(i(J,"bottom",-b+M),b==E.$22b-E.$23b?i(J,N,e):i(J,N,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(y,Q){for(var z=0;z<y.length;z++){var M=y[z];if(Q(M))return M;if(M.items){var I=this.$17b(M.items,Q);if(I)return I}}},$2b:function(e,I){for(var D=this,H=0;H<e.length;H++){D.$5b++;var c=e[H];if(c.visible!==!1&&!(h.isFunction(c.visible)&&c.visible()===!1||D.$16b&&!D.$16b.call(D,c))){var s=A("li"),X=D.$5b+"";if(i(s,"white-space","nowrap"),i(s,N,"block"),"separator"===c||c.separator===!0){var x=b();x[n]="separator",i(x,p,h.contextMenuSeparatorWidth+M),i(x,"background",h.contextMenuSeparatorColor),R(s,x)}else{c._id=X,s.setAttribute("data-id",X);var E=A("span"),v=A("span"),G=$(),y=b();if(i(E,N,"inline-block"),i(E,p,"1.2em"),i(v,N,"inline-block"),i(v,p,"1.2em"),i(v,"line-height","1.2em"),G[n]="prefix",i(G,N,"inline-block"),i(G,U,"1em"),i(G,p,"1em"),i(G,"vertical-align","middle"),i(G,C,"0 0.2em"),"check"===c.type&&c.selected?G[n]+=" check-prefix":"radio"===c.type&&c.selected&&(G[n]+=" radio-prefix"),R(s,G),c.icon){var V=$();V[n]="contextmenu-item-icon",i(V,N,"inline-block"),i(V,p,"1.2em"),i(V,U,"1.2em"),i(V,"margin-right","0.2em"),i(V,"float","left"),V.$50b=c.icon,V._item=c,R(E,V)}if(v[g]=c.label,R(E,v),R(s,E),y[n]="suffix",i(y,N,"inline-block"),i(y,"margin-left","1em"),i(y,"margin-right","0.4em"),i(y,"text-align","right"),i(y,"font-size","75%"),c.items&&(y[g]=h.contextMenuSubmenuMark),c.suffix&&(y[g]=c.suffix),R(s,y),s[n]="menu-item menu-item"+X,null!=c.background?c.background instanceof Function?i(s,"background-color",c.background.call(D,c)):i(s,"background-color",c.background):i(s,"background-color",h.contextMenuBackground),i(s,"color",h.contextMenuLabelColor),i(s,w,"3px 0"),c.disabled instanceof Function){var o=c.disabled.call(D,c);o&&(s[n]+=" disabled",i(s,"color",h.contextMenuDisabledLabelColor))}else c.disabled&&(s[n]+=" disabled",i(s,"color",h.contextMenuDisabledLabelColor));if(c.items){D.$21b||(D.$21b=new u.List);var P=A("ul");P[n]="submenu"+X,P.$45b=X,i(P,F,"hidden"),i(P,_,k),R(D._view,P),D.$21b.add(P),D.$2b(c.items,P)}}R(I,s)}}},rebuild:function(){var t=this,G=t._items,F=t._view;if(F&&(F[g]="",t.$21b=v,t.$5b=0,t.$19b=v,t.$20b=v,F.$26b=v,G&&0!==G.length)){var W=A("ul",t._r);R(F,W),t.$2b(G,W)}},addTo:function(l){if(l){var D=this,r=D.$13b;if(D.$12b=l,D.$9b=function(Z){r.$44b(Z)},D.$27b=function(c){r.$41b(c)},t){var g=D.$6b=function(b){r.$38b(b)},j=D.$7b=function(_){r.$39b(_)},H=D.$8b=function(N){r.$40b(N)};q(l,"touchstart",g,!0),q(l,"touchmove",j),q(l,"touchend",H)}else q(l,"contextmenu",D.$27b)}},showOnView:function(W,O,y){W=W.getView?W.getView():W;var o=h.getWindowInfo(),V=W.getBoundingClientRect();this.show(V.left+o.left+O,V.top+o.top+y)},show:function(L,J,x){var w=this,x=x==v?!0:!1,A=w._view;if(A){if(w.invalidate(),1===arguments.length){var z=L;if(t){var o=f(z);L=o.pageX,J=o.pageY}else L=z.pageX,J=z.pageY}var P=h.getWindowInfo(),H=P.width,O=P.height,E=P.left,y=P.top,c={pageX:L,pageY:J,clientX:L-E,clientY:J-y,target:1,originEvent:z},T=c.clientX,I=c.clientY,D=function(H){H.style.height=O-6+M;var J=b(),Q=b(),Z=function(C){i(C,_,k),i(C,"text-align","center"),i(C,U,"100%"),i(C,"font-size",10+M),i(C,"padding","2px 0"),i(C,"border","0px solid "+h.contextMenuScrollerBorderColor),i(C,"background-color",h.contextMenuScrollerColor1),C.style.backgroundImage="-webkit-linear-gradient(top, "+h.contextMenuScrollerColor1+", "+h.contextMenuScrollerColor2+")",C.style.backgroundImage="linear-gradient(to bottom, "+h.contextMenuScrollerColor1+", "+h.contextMenuScrollerColor2+")"};J[n]="menu-arrow-item menu-arrow-item-top",Q[n]="menu-arrow-item menu-arrow-item-bottom",Z(J),i(J,"top",s),i(J,"left",s),i(J,"border-bottom-width",1+M),J[g]="▲",Z(Q),i(Q,"bottom",s),i(Q,"left",s),i(Q,"border-top-width",1+M),Q[g]="▼",H.$24b=J,H.$25b=Q,H.$18b=H.scrollTop,H.$22b=H.scrollHeight,H.$23b=H.clientHeight,R(H,J),R(H,Q),w.$42b(H)};w.beforeShow&&w.beforeShow(c);var Z=w._items;if(Z&&(z&&z.preventDefault(),Z.length)){w.rebuild(),h.appendToScreen(A),A.$26b=S(A,".menu-item");var X=A.children[0];X.offsetHeight>O&&D(X);var d=I+(x?1:0),e=T+(x?1:0),F=function(s){for(var W=0,F=0,Z=0,I=w.$43b;Z<s.children.length;Z++){var E=s.children[Z];if(E.getAttribute("data-id")){var b=E.children[1],d=E.children[2],l=b.children;if(I){var T=l[0];l.length>1&&(T=l[1]),T.offsetWidth>I&&(T[g]="<marquee scrollamount='3'>"+T[g]+"</marquee>",T.children[0].style.verticalAlign="text-bottom",i(T,U,I+M),i(T,N,"inline-block"))}var A=b.offsetWidth,L=d.offsetWidth;A>W&&(W=A),L>F&&(F=L)}}for(Z=0;Z<s.children.length;Z++){var E=s.children[Z];if(E.getAttribute("data-id")){var b=E.children[1],d=E.children[2],n=b.children[0],t=b.children[1];!t&&n.style.width&&i(n,U,W+M),i(b,U,W+M),i(d,U,F+M)}}};F(X);var u=I+3+A.offsetHeight,m=T+3+A.offsetWidth;u>O?i(A,K,d-(u-O)+y+M):i(A,K,d+y+M),m>H?i(A,j,e-(m-H)+E+M):i(A,j,e+E+M);var l=w.$21b;l&&l.each(function(U){F(U),U.offsetHeight>O&&D(U)}),w.$9b&&q(Q(),t?"touchstart":"mousedown",w.$9b,!0),w.afterShow&&w.afterShow(c),w.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=v:!1},getRelatedView:function(){return this.$12b},hide:function(){var f=this,Y=f._view;Y&&Y.parentNode&&(V(Y.parentNode,Y),y(Q(),t?"touchstart":"mousedown",f.$9b,!0),f.afterHide&&f.afterHide())},dispose:function(){var c=this,i=c.$12b,M=c._view;M&&(M.parentNode&&V(M.parentNode,M),c.disableGlobalKey(),i&&(t?(y(i,"touchstart",c.$6b,!0),y(i,"touchmove",c.$7b),y(i,"touchend",c.$8b)):y(i,"contextmenu",c.$27b)),c._view=c._items=c.$21b=c.$19b=c.$12b=c.beforeShow=c.afterShow=c.afterHide=c.$9b=c.$3b=c.$6b=c.$7b=c.$8b=c.$27b=v)},$46b:function(k,J,q,G,x){var I=z.initContext(k);z.translateAndScale(I,0,0,1),I.clearRect(0,0,q,G),h.drawStretchImage(I,h.getImage(J),"fill",0,0,q,G,x,this),I.restore()},$47b:function(){var h,P,a,I=this,Z=I._view;if(I.isShowing()){var k=S(Z,".check-prefix");for(a=0;a<k.length;a++){var $=k[a];h=$.clientWidth,P=$.clientHeight,$.$48b=h,$.$49b=P,z.setCanvas($,h,P)}var F=S(Z,".radio-prefix");for(a=0;a<F.length;a++){var C=F[a];h=C.clientWidth,P=C.clientHeight,C.$48b=h,C.$49b=P,z.setCanvas(C,h,P)}var x=S(Z,".contextmenu-item-icon");for(a=0;a<x.length;a++){var U=x[a];h=U.clientWidth,P=U.clientHeight,U.$48b=h,U.$49b=P,z.setCanvas(U,h,P)}}},validateImpl:function(){var I,Z,m,A=this,W=A._view;if(A.isShowing()){var J=S(W,".check-prefix");for(m=0;m<J.length;m++){var d=J[m];I=d.$48b,Z=d.$49b,I&&Z&&A.$46b(d,h.contextMenuCheckIcon,I,Z)}var U=S(W,".radio-prefix");for(m=0;m<U.length;m++){var D=U[m];I=D.$48b,Z=D.$49b,I&&Z&&A.$46b(D,h.contextMenuRadioIcon,I,Z)}var M=S(W,".contextmenu-item-icon");for(m=0;m<M.length;m++){var r=M[m];I=r.$48b,Z=r.$49b,I&&Z&&A.$46b(r,h.getImage(r.$50b),I,Z,r._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);