!function(u){"use strict";var P="ht",Z=u[P],r=Z.Default,b=Math,U=(b.PI,b.sin,b.cos,b.atan2,b.sqrt,b.max),p=b.floor,O=(b.round,b.ceil),N=Z.Shape,f=(Z.Edge,Z.List),S=Z.Style,W=Z.graph,M=r.getInternal(),J=M.ui(),I=null,E="prototype",s=u.clearInterval,Y=u.setInterval,c=function(v){var b=v.data,S=this.dm();if(b&&"add"===v.kind){var h=S.$1c,M=b instanceof N?"shape.":"edge.";h&&b.s(M+"dash.flow")&&h.indexOf(b)<0&&h.push(b)}"clear"===v.kind&&(S.$1c=[])},i=function(D){var P=D.property,o=D.data,q=D.newValue,_=this.dm().$1c,c=o instanceof N?"s:shape.dash.flow":"s:edge.dash.flow";if(_&&P===c)if(q)_.indexOf(o)<0&&_.push(o);else for(var G=_.length,V=0;G>V;V++)if(_[V]===o){_.splice(V,1);break}},v=W.GraphView[E],C=J.EdgeUI[E],g=J.ShapeUI[E],G=g._80o,V=C._80o,X=Z.DataModel[E],h=X.prepareRemove,K=v.setDataModel;S["edge.dash.flow.step"]==I&&(S["edge.dash.flow.step"]=3),S["shape.dash.flow.step"]==I&&(S["shape.dash.flow.step"]=3),X.prepareRemove=function(L){h.call(this,L);var $=L._dataModel,N=$.$1c;if(N)for(var u=N.length,A=0;u>A;A++)if(N[A]===L){N.splice(A,1);break}},v.setDataModel=function(Q){var R=this,a=R._dataModel;if(a!==Q){a&&(a.umm(c,R),a.umd(i,R),a.$1c=[]),Q.mm(c,R),Q.md(i,R);var f=Q.$1c=[];Q.each(function(m){var Z=m instanceof N?"shape.":"edge.";m.s(Z+"dash.flow")&&f.indexOf(m)<0&&f.push(m)}),K.call(R,Q)}},v.setDashFlowInterval=function(e){var r=this,T=r.$2c;r.$2c=e,r.fp("dashFlowInterval",T,e),r.$3c!=I&&(s(r.$3c),delete r.$3c,r.enableDashFlow(e))},v.getDashFlowInterval=function(){return this.$2c},v.$4c=function(){var L,e,R,k=this,T=k.tx(),X=k.ty(),h=k._zoom,y=k.getWidth(),m=k.getHeight(),$={x:-T/h,y:-X/h,width:y/h,height:m/h},n=k.dm().$1c,t=k._56I,A=new f;if(n.forEach(function(M){t[M.getId()]&&(L=k.getDataUI(M),L&&(R=L._79o(),R&&A.add(R)))}),0!==A.size()&&(A.each(function(f){r.intersectsRect($,f)&&(e=r.unionRect(e,f))}),e&&(e&&(r.grow(e,U(1,1/h)),e.x=p(e.x*h)/h,e.y=p(e.y*h)/h,e.width=O(e.width*h)/h,e.height=O(e.height*h)/h,e=r.intersection($,e)),e))){var E=k._canvas.getContext("2d");E.save(),E.lineCap=r.lineCap,E.lineJoin=r.lineJoin,M.translateAndScale(E,T,X,h),E.beginPath(),E.rect(e.x,e.y,e.width,e.height),E.clip(),E.clearRect(e.x,e.y,e.width,e.height),k.$5c(E,e),E.restore()}},v.$5c=function(x,R){var A,T,y=this;y._93db(x),y.each(function(Q){y._56I[Q._id]&&(A=y.getDataUI(Q),A&&(T=A._79o(),(!R||r.intersectsRect(R,T))&&(A.$7c=!0,A._42(x),delete A.$7c)))}),y._92db(x)},v.enableDashFlow=function(Z){var y=this;y.$3c==I&&(y.$3c=Y(function(){y.$4c()},Z||y.$2c||50))},v.disableDashFlow=function(){var F=this;s(F.$3c),delete F.$3c};var t=function(){var i=this,q=i._data,e=q instanceof N?"shape.":"edge.",r=q.s(e+"dash.pattern"),b=q.s(e+"dash.flow.reverse");if(r&&q.s(e+"dash")&&q.s(e+"dash.flow")&&i.$7c){var S=i.s(e+"dash.offset")||0,x=q.s(e+"dash.flow.step"),M=q.getStyleMap(),F=0;r.forEach(function(C){F+=C}),b&&(x=-x),S-=x,S%=F,M||(q._styleMap=M={}),M[e+"dash.offset"]=S}};C._80o=function(F){V.call(this,F),t.call(this)},g._80o=function(x){G.call(this,x),t.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);